# クラス作成画面の自動保存（ドラフト）機能の実装計画

クラス作成中にブラウザのリロードや不意の切断が発生しても、入力内容が失われないように `localStorage` を使用したドラフト保存機能を実装します。

## 現状の課題
- クラス作成画面（`AdminTodayManager.tsx`）で入力途中のデータはブラウザの状態（State）にのみ保持されており、リロードすると失われる。
- サーバーへの「SAVE CLASS」ボタンを押す前に画面を離れると、最初から入力し直しになる。

## 解決策
`localStorage` を利用して、入力内容をリアルタイムでブラウザに保存します。

1.  **自動保存**: タイトルやセクションが変更されるたびに、日付と BOX ID ごとに固有のキーで `localStorage` に保存します。
2.  **復元**: ページ読み込み時（または日付変更時）、サーバーからデータを取得したあとに、`localStorage` により新しいドラフトが存在すればそちらを優先して読み込みます。
3.  **クリーンアップ**: サーバーへの保存が正常に完了した際に、その日付のドラフトを消去します。

## 変更内容

### 1. 管理画面のロジック修正
#### [MODIFY] [AdminTodayManager.tsx](file:///c:/Users/kieee/.gemini:antigravity/playground/chrono-lunar/src/pages/Admin/AdminTodayManager.tsx)
- `useEffect` を追加し、`title` と `sections` の変更を監視して `localStorage` に保存。
- `loadClassData` 関数内で、`localStorage` からの復旧ロジックを追加。
- `handleSave` 関数の成功時にドラフトを削除する。

## 検証計画

### 1. 手動検証
1.  クラス作成画面で何かを入力する。
2.  ブラウザをリロードする。
3.  入力内容が保持されていることを確認する。
4.  「SAVE CLASS」を実行し、リロードした際にドラフト読み込みメッセージ（または挙動）がなく、サーバーのデータが表示されることを確認する。
